{
    "name": "Workflow 3: Orquestación HTTP",
    "nodes": [
        {
            "id": "start-1",
            "type": "start",
            "position": {
                "x": 350,
                "y": 50
            },
            "data": {
                "label": "Start"
            }
        },
        {
            "id": "http-1",
            "type": "http_request",
            "position": {
                "x": 350,
                "y": 150
            },
            "data": {
                "label": "Autenticación",
                "config": {
                    "method": "POST",
                    "url": "https://api.example.com/auth/login",
                    "map": {
                        "token": "$.token"
                    }
                }
            }
        },
        {
            "id": "http-2",
            "type": "http_request",
            "position": {
                "x": 350,
                "y": 250
            },
            "data": {
                "label": "Servicio principal",
                "config": {
                    "method": "GET",
                    "url": "https://api.example.com/service",
                    "headers": "{\"Authorization\": \"Bearer {{context.token}}\"}",
                    "map": {
                        "response": "$"
                    }
                }
            }
        },
        {
            "id": "cond-1",
            "type": "conditional",
            "position": {
                "x": 350,
                "y": 350
            },
            "data": {
                "label": "Evaluar respuesta",
                "config": {
                    "condition": "context.response.success == true"
                }
            }
        },
        {
            "id": "http-3",
            "type": "http_request",
            "position": {
                "x": 150,
                "y": 450
            },
            "data": {
                "label": "Notificar éxito",
                "config": {
                    "method": "POST",
                    "url": "https://api.example.com/notify/success"
                }
            }
        },
        {
            "id": "cmd-1",
            "type": "command",
            "position": {
                "x": 550,
                "y": 450
            },
            "data": {
                "label": "Registrar fallo",
                "config": {
                    "command": "echo",
                    "args": "\"El servicio principal falló\""
                }
            }
        }
    ],
    "edges": [
        {
            "id": "e1",
            "source": "start-1",
            "target": "http-1"
        },
        {
            "id": "e2",
            "source": "http-1",
            "target": "http-2"
        },
        {
            "id": "e3",
            "source": "http-2",
            "target": "cond-1"
        },
        {
            "id": "e4",
            "source": "cond-1",
            "target": "http-3",
            "sourceHandle": "true"
        },
        {
            "id": "e5",
            "source": "cond-1",
            "target": "cmd-1",
            "sourceHandle": "false"
        }
    ]
}